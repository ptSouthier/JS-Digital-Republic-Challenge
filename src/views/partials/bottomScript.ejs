<script>
  const wallsDimensionsForm = document.querySelector('#walls-dimensions-form');
  const wallsFieldsets = document.querySelectorAll('.wall-fieldset');
  const resultContainer = document.querySelector('#result-container');
  const windowMeasures = { height: 1.2, width: 2 };
  const doorMeasures = { height: 1.9, width: 0.8 };
  const squareMetersByPaintLiter = 5;
  const paintCanSizes = [0.5, 2.5, 3.6, 18];

  const getSquareMeter = (height, width) => {
    return height * width;
  };

  const getWindowsTotalArea = (windowsQuantity) => {
    const windowArea = getSquareMeter(windowMeasures.height, windowMeasures.width);
    return windowArea * windowsQuantity;
  };

  const getDoorsTotalArea = (doorsQuantity) => {
    const doorArea = getSquareMeter(doorMeasures.height, doorMeasures.width);
    return doorArea * doorsQuantity;
  };

  const getWindowsAndDoorsTotalArea = (windowsArea, doorsArea) => {
    return windowsArea + doorsArea;
  };

  const validateWindowsAndDoorsArea = (windowsAndDoorsTotalArea, wallArea) => {
    const fiftyPercentOfWallArea = wallArea * 0.5;
    return windowsAndDoorsTotalArea > fiftyPercentOfWallArea ? false : true;
  };

  const validateHeightOfWallsWithDoor = (wallHeight) => {
    const minimumDistanceMargin = 0.3;
    const minimumAcceptableWallHeight = doorMeasures.height + minimumDistanceMargin;
    return wallHeight < minimumAcceptableWallHeight ? false : true;
  };

  const validateWallAreaLimit = (wallArea) => {
    const maximumSquareMetersByWall = 15;
    return wallArea > maximumSquareMetersByWall ? false : true;
  };

  const getWallEntryValue = (wallElement, entryString, index) => {
    return parseFloat(wallElement.querySelector(`#${entryString}-${index}`).value);
  };

  const getWallsPaintableArea = (wallsElements) => {
    const wallsObject = {};

    wallsElements.forEach((wall, currentIndex) => {
      const heightValue = getWallEntryValue(wall, 'height', currentIndex);
      const widthValue = getWallEntryValue(wall, 'width', currentIndex);
      const windowsValue = getWallEntryValue(wall, 'windows', currentIndex);
      const doorsValue = getWallEntryValue(wall, 'doors', currentIndex);
      
      const wallArea = getSquareMeter(heightValue, widthValue);
      const windowsArea = getWindowsTotalArea(windowsValue);
      const doorArea = getDoorsTotalArea(doorsValue);
      const windowsAndDoorsArea = getWindowsAndDoorsTotalArea(windowsArea, doorArea);

      if (!validateWindowsAndDoorsArea(windowsAndDoorsArea, wallArea)) {
        const paragraph = document.createElement('p');
        paragraph.innerText = `Entrada inválida! ` +
          `Verifique a quantidade de Janelas e/ou Portas da Parede ${currentIndex + 1}.`;
        resultContainer.innerHTML = '';
        resultContainer.appendChild(paragraph);
      } else if(!validateHeightOfWallsWithDoor(heightValue)) {
        const paragraph = document.createElement('p');
        paragraph.innerText = `Entrada inválida! ` +
          `Verifique o valor da Altura inserida na Parede ${currentIndex + 1}.`;
        resultContainer.innerHTML = '';
        resultContainer.appendChild(paragraph);
      } else if(!validateWallAreaLimit(wallArea)) {
        const paragraph = document.createElement('p');
        paragraph.innerText = `Entrada inválida! ` +
          `Os valores inseridos na Parede ${currentIndex + 1} ultrapassam 15m².`;
        resultContainer.innerHTML = '';
        resultContainer.appendChild(paragraph);
      } else {
        wallsObject[`wall${currentIndex}`] = wallArea - windowsAndDoorsArea;
      };
    });

    return wallsObject;
  };

  const handleSubmit = (event) => {
    event.preventDefault();
    const wallsData = getWallsPaintableArea(wallsFieldsets);
    console.log(wallsData);
    // Object.keys(wallsData).forEach((wallData))
  };

  wallsDimensionsForm.addEventListener('submit', handleSubmit);
</script>
